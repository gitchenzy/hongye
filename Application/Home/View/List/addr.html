<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/Home/css/addr.css">

    <link rel="stylesheet" href="__PUBLIC__/Home/css/address.css">
    <title>
        <empty name="address">
            添加地址
         <else />
            修改地址
        </empty>
    </title>
    <style type="text/css">
    .address-container input{
    width: 200px;
    height: 1.2rem;
    line-height: .9rem;
    border:none;
    display: block;
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    position: relative;
    top:-30px;
    left: 87px;
}

        html,
        body {
            margin: 0 auto;
            width: 100%;
            min-height: 100%;
            overflow-x: hidden;
            -webkit-user-select: none;
            background: #f2f2f2;
        }
        .popup-regions-box .region-list {
            height: 9rem;
            overflow: auto;
        }
        .content-block input {
            float: left;
            width: 202px;
            height: 20px;
            font-size: 14px;
            border: none;
            border-radius: 5px;
            display: inline-block;
            position: relative;
            top:-28px;
            left: 88px;

        }
        .pop-inner{
    background: #FFF;
    position: fixed;
    top: auto;
    bottom: 0;
    left: 0;
    right: 0;
    overflow: hidden;
    padding: 8px;
}
.popup-regions-box .region-list dl dd{
    font-size: 14px;
    padding: .1rem .15rem;
    margin-bottom: 4px;
}
.popup-regions-box .region-tab span {
    padding: .15rem;
    display: inline-block;
    color: #999;
    margin-right: 25px;
}
        </style>
        
</head>
<body>
<div class="page">
    <div class="addr">
        <div class="addr_in">
            <div class="addr_l">
                <div class="addr_lin">
                    <p>收货人</p>
                </div>
                <input type="text" id="name" value="{$address.name}" placeholder="请输入姓名">
            </div>
            <div class="addr_l">
                <div style="width:80px" class="addr_lin">
                    <p>联系电话</p>
                </div>
                <input type="text" value="{$address.phone}" id="phone" placeholder="联系电话">
            </div>
            <div class="addr_l">
                <div style="width:80px" class="addr_lin">
                    <p>所在地区</p>
                    <div>
                            

                        <div class="address-container">

                           <div><input class="region-input" type="text" placeholder="省份 城市 区县" value="{$address.pca}" readonly="readonly"></div>

                        </div>
                            
                            
                     </div>

                    <!--                     <div class="info">
                        <div style="">
                            <select id="s_province" name="s_province" value="sdf"></select>
                            <select id="s_city" name="s_city" ></select>
                            <select id="s_county" name="s_county"></select>

                        </div>
                        <div id="show"></div>
                    </div> -->

                </div>
                <!--   <p>存放地址的标签</p> -->
                <!--<div class="addr_l_pic">-->
                    <!--<img src="__PUBLIC__/Home/images/new/none.jpg/new/back_r.png">-->
                <!--</div>-->
                <!--<span>请选择</span>-->
            </div>
            <div class="addr_b">
                <input type="text" value="{$address.address}" id="address" placeholder="详细地址">
            </div>
        </div>
        <input type="hidden" id="aid" value="{$address.id}" >
    </div>
    <div class="addr">
        <div class="addr_in">
            <div style="border:none" class="addr_l">
                <div class="addr_o">
                    <p id="sub" >确认提交</p>
                </div>
            </div>

        </div>
    </div>
    <div class="addr">
        <div class="addr_in">
            <div style="border:none" class="addr_l">
                <div class="addr_s">
                    <p>设置为默认地址</p>
                    <input id="default" type="checkbox">
                </div>
            </div>
        </div>
    </div>
    
</div>
<div class="popup-regions-box">
        <div class="mask-bg"></div>
        <div class="pop-inner">
            <div class="region-tab">
                <span class="active">省份</span>
                <span>城市</span>
                <span>区县</span>
                <a class="confirm-region" href="##">确定</a>
            </div>
            <div class="region-list">
                <dl  style="cursor:pointer" id="d1" class="rl1 active">
                    
                </dl>
                <dl style="cursor:pointer" id="d2" class="rl2">
                    
                </dl>
                <dl style="cursor:pointer" id="d3" class="rl3">
                    
                </dl>

                <input id='province' type="text" value="{$address.province|default=福建省}" data-txt="" hidden>
                <input id='city' type="text" value="{$address.city|default=厦门市}" data-txt="" hidden >
                <input id='area' type="text" value="{$address.area|default=思明区}" data-txt="" hidden>

                <!--<input id='province' type="text" value="110000" data-txt="" hidden>-->
                <!--<input id='city' type="text" value="110100" data-txt="" hidden >-->
                <!--<input id='area' type="text" value="110101" data-txt="" hidden>-->

            </div>
        </div>
        
    </div>
</body>
<script type="text/javascript" src="__PUBLIC__/Home/js/jquery-1.7.1.min.js"></script>
<script src="__PUBLIC__/Home/js/address.js"></script>
<script>
    var font=$('#d1>dd');
    font.css('font-size','13px')
    console.log(font.length)
    $('.mask-bg').click(function(){
        $('.popup-regions-box').css('display','none')
    })
    </script>



<!--<script class="resources library" src="__PUBLIC__/Home/js/select.js" type="text/javascript"></script>-->

<!--<script type="text/javascript">-->
    <!--var pro = '{$address.province|default=省份}';-->
    <!--var city = '{$address.city|default=地级市}';-->
    <!--var area = '{$address.area|default=市、县级市}';-->
    <!--var opt0 = [pro,city,area];//初始值-->
    <!--_init_area();-->
<!--</script>-->
<script>

    $('#sub').click(function(){
        var region_val = $(".region-input").val().split(" ");

        var name=$('#name').val();
        var phone=$('#phone').val();
        var province = region_val[0];
        var city= region_val[1];
        var county=region_val[2];
        var address=$('#address').val();

        if($('#is_default').is(':checked')) {
            var def = 2;
        }else{
            var def = 1;
        }
        var aid = $('#aid').val();
        var info = {is_default:def,name:name,phone:phone,province:province,city:city,area:county,address:address,aid:aid}
        $.post("{:U('List/addaddr')}",info,function(data){

            if(data.status == 1){
                alert('添加成功！')
                var id = '{$Think.get.id}';
                if(id){
                    if(aid > 0){
                        location.href="/index.php/List/pay?id="+id+"&aid="+aid;
                    }else{
                        location.href="/index.php/List/pay?id="+id+"&aid="+data.info;
                    }
                }else{
                    location.href="/index.php/List/addr_before";
                }

            }else{
                alert(data.info)
            }

        })




    })


</script>

</html>